@model DziennikSportowca.Models.ViewModels.DishDetailsViewModel

@{
    ViewData["Title"] = "Details";
}

<div class="container-breadcrumb">
    <ol class="breadcrumb breadcrumb-arrow">
        <li><a asp-action="Index">Posiłki</a></li>
        <li class="active"><span>Szczegóły posiłku</span></li>
    </ol>
</div>

<div class="panel panel-info">
    <!-- Default panel contents -->
    <div class="panel-heading">Dane posiłku</div>
    <div class="panel-body">
        <div class="col-md-12 padding-0">
            <div class="well well-sm panel-subheading panel-subheading-info"><label>PODSTAWOWE INFORMACJE</label></div>
        </div>
        <div class="col-md-12 padding-0">
            <label class="inline">Nazwa: </label>
            <p class="inline">@Html.DisplayFor(x => x.Dish.Description)</p>
        </div>
        <div class="col-md-12 padding-0">
            <div class="col-md-4 padding-0">
                <label class="inline">Całkowita waga: </label>
                <p class="inline">@Html.DisplayFor(x => x.TotalWeight)</p>
            </div>
            <div class="col-md-4 padding-0">
                <label class="inline">Suma białka: </label>
                <p class="inline">@Html.DisplayFor(x => x.TotalProteins)</p>
            </div>
            <div class="col-md-4 padding-0">
                <label class="inline">Suma węglowodanów: </label>
                <p class="inline">@Html.DisplayFor(x => x.TotalCarbs)</p>
            </div>
        </div>
        <div class="col-md-12 padding-0">
            <div class="col-md-4 padding-0">
                <label class="inline">Suma tłuszczów: </label>
                <p class="inline">@Html.DisplayFor(x => x.TotalFat)</p>
            </div>
            <div class="col-md-4 padding-0">
                <label class="inline">Wartość odżywcza: </label>
                <p class="inline">@Html.DisplayFor(x => x.TotalEnergy)</p>
            </div>
        </div>
    </div>
    
    <div class="col-md-12 padding-0">
        <div class="well well-sm panel-subheading margin-0 panel-subheading-info"><label>INFORMACJE O PRODUKTACH</label></div>
    </div>

    @if (Model.Dish.FoodProducts != null && Model.Dish.FoodProducts.Any())
    {
        <table class="table table-hover table-responsive table-info">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Typ produktu</th>
                    <th>Produkt</th>
                    <th>Waga produktu [g]</th>
                    <th>Białko [g]</th>
                    <th>Węglowodany [g]</th>
                    <th>Tłuszcz [g]</th>
                    <th>kcal</th>
                </tr>
            </thead>

            <tbody>
                @{
                    int  i = 1;
                    foreach (var foodProduct in Model.Dish.FoodProducts)
                    {

                        <tr>
                            <td>
                                @Html.DisplayFor(x => i)
                            </td>
                            <td>
                                @Html.DisplayFor(x => foodProduct.FoodProduct.Type.Description)
                            </td>
                            <td>
                                @Html.DisplayFor(x => foodProduct.FoodProduct.Description)
                            </td>
                            <td>
                                @Html.DisplayFor(x => foodProduct.FoodProductWeight)
                            </td>
                            <td>
                                @{ 
                                    double proteins = foodProduct.FoodProduct.Protein * foodProduct.FoodProductWeight / 100;                                    
                                }
                                @Html.DisplayFor(x => proteins)
                            </td>
                            <td>
                                @{
                                    double carbs = foodProduct.FoodProduct.Carbohydrate * foodProduct.FoodProductWeight / 100;
                                }
                                @Html.DisplayFor(x => carbs)
                            </td>
                            <td>
                                @{
                                    double fats = foodProduct.FoodProduct.Fat * foodProduct.FoodProductWeight / 100;
                                }
                                @Html.DisplayFor(x => fats)
                            </td>
                            <td>
                                @{
                                    double energy = foodProduct.FoodProduct.Energy * foodProduct.FoodProductWeight / 100;
                                }
                                @Html.DisplayFor(x => energy)
                            </td>
                        </tr>
                        i++;
                    }
                }
            </tbody>
        </table>
    }
    else
    {
        <h4 class="inline"><label class="text-warning text-center">Ten posiłek nie zawiera żadnych produktów...</label></h4>
        <a asp-action="Edit" asp-route-id="@Model.Dish.Id" class="btn btn-primary box foo margin-left-20">Dodaj produkty <i class="fa fa-plus-square-o"></i></a>
    }
</div>

<div>
    <a asp-action="Edit" asp-route-id="@Model.Dish.Id" class="btn-success box curmudgeon">Edytuj <i class="fa fa-pencil-square-o"></i></a>
    <a asp-action="Index" class="btn-primary box foo">Powrót do listy <i class="fa fa-undo"></i></a>
</div>
